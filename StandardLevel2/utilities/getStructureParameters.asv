function p = getStructureParameters(mystruct, myfield, value)
% Sets p to mystruct.myfield if it exists, other assigns it to value
% Returns the final myfield field value in mystruct.
if  ~exist('value', 'var') && ~isfield(mystruct, myfield)
    error(['Parameter ' myfield ' is not defined']);
elseif exist('value', 'var') && ~isfield(mystruct, myfield) 
    p = value;
else
    p = mystruct.(myfield);
end
